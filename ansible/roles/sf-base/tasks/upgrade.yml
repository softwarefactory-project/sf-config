---
- name: Remove renamed files
  file:
    path: "{{ item }}"
    state: absent
  with_items:
    - /usr/libexec/wait4port
    - /usr/libexec/wait4mariadb
    - /usr/libexec/wait4gerrit
    - /usr/local/bin/zuul-changes.py
  when: sf_previous_version < 3.3

- name: Remove unused openstack repos
  yum:
    name: '{{ item }}'
    state: absent
  with_items:
    - centos-release-ceph-luminous
    - centos-release-openstack-queens
  when:
    - ansible_distribution == "CentOS"
    - sf_previous_version < 3.4

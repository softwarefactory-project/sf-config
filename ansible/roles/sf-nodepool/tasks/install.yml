---
- name: "Install package for nodepool config validate"
  yum:
    name: nodepool-launcher
    state: present
    disablerepo: "{{ yum_disable_repo|default(omit) }}"
    enablerepo: "{{ yum_enable_repo|default(omit) }}"
  delegate_to: "{{ item }}"
  with_items: "{{ groups['zuul3-executor'] }}"

- name: "Install package for nodepool-launcher"
  yum:
    name: nodepool-launcher
    state: present
    disablerepo: "{{ yum_disable_repo|default(omit) }}"
    enablerepo: "{{ yum_enable_repo|default(omit) }}"
  when: "'nodepool-launcher' in nodepool_services"

- name: "Install package for nodepool-builder"
  yum:
    name: "{{ item }}"
    state: present
    disablerepo: "{{ yum_disable_repo|default(omit) }}"
    enablerepo: "{{ yum_enable_repo|default(omit) }}"
  with_items:
    - httpd
    - nodepool-builder
    - sf-elements
  when: "'nodepool-builder' in nodepool_services"

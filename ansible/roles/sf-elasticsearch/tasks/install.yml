---
- name: Install requirements
  yum:
    name:
      - "{{ openjdk_release }}"
      - wget
      - unzip
      - elasticsearch-curator
    state: present
    disablerepo: "{{ yum_disable_repo|default(omit) }}"
    enablerepo: "{{ yum_enable_repo|default(omit) }}"

- include_tasks: configure_mirror.yml

- name: Install Opendistro Elasticsearch package
  yum:
    name: "opendistroforelasticsearch-{{ opendistro_version }}"
    state: present
    disablerepo: "*"
    enablerepo: "{{ opendistro_repos_name }}"

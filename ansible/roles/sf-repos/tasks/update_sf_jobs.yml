---
- set_fact:
    sf_jobs_clone_dir: /root/sf-jobs

- name: Sync sf-jobs local copy
  command: "git {{ item }}"
  args:
    chdir: "{{ sf_jobs_clone_dir }}"
  with_items:
    - "remote set-url origin {{ sf_jobs_location }}"
    - "fetch --all"
    - "reset --hard origin/master --"
    - "clean -f -x -d"

- include_tasks: sync_sf_jobs_content.yml

- include_tasks: submit_repo_update.yml
  vars:
    clone_dir: "{{ sf_jobs_clone_dir }}"
    clone_remote: "{{ sf_jobs_location }}"

# This file is managed by sfconfig, do not edit manually
---
{% if not tenant_deployment %}
{% if nodepool_openshift_providers|default(False) or nodepool_openshiftpods_providers|default(False) %}
labels:
  - name: openshift-project
    min-ready: 0
  - name: openshift-pod-fedora
    min-ready: 0

{% endif %}{# endif nodepool_openshift_providers #}

{% for host in inventory %}{% if 'hypervisor-openshift' in host['roles'] %}

providers:
  - name: {{ host.name }}
    driver: openshift
    context: "myproject/{{ host.hostname|replace('.', '-') }}:8443/system:serviceaccount:myproject:nodepool"
    max-projects: {{ host.get('max-servers', 10) }}
    pools:
      - name: zuul-ci
        labels:
          - name: openshift-project
            type: project
          - name: openshift-pod-fedora
            type: pod
            image: docker.io/fedora:28

{% endif %}{% endfor %}{# endif endfor host in inventory #}

{% endif %}{# endif tenant_deployment #}

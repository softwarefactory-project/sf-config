---
{% if 'firehose' in roles %}
- hosts: localhost
  roles:
    - role: publish-status-mqtt
      mqtt_server: "{{ firehose_host }}"
      mqtt_username: "{{'{{'}} sf_service_user.username {{'}}'}}"
      mqtt_password: "{{'{{'}} sf_service_user.password | trim {{'}}'}}"
      # TODO condition this to the presence of the firehose in the arch
      ignore_errors: yes
{% endif %}
- hosts: all
  roles:
    - prepare-workspace
    - role: validate-host

# This file is managed by sfconfig, do not edit manually
{% if 'hypervisor-oci' in roles %}

labels:
  - name: hypervisor-oci
{% for host in inventory %}
  - name: hypervisor-oci-{{ host['name'] }}
{% endfor %}

providers:
{% for host in inventory %}
{% if 'hypervisor-oci' in host['roles'] %}
  - name: oci-provider-{{ loop.index0 }}
    driver: oci
    hypervisor: {{ host['hostname'] }}
    pools:
      - name: main
        max-servers: {{ host.get('max-servers', 10) }}
        labels:
          - name: hypervisor-oci
            username: zuul-worker
          - name: hypervisor-oci-{{ host['name'] }}
            username: zuul-worker

{% endif %}
{% endfor %}
{% endif %}

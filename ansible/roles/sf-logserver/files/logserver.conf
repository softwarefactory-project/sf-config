<Directory "/var/www/logs/">
    Options Indexes SymLinksIfOwnerMatch
    Require all granted
    IndexOptions FancyIndexing HTMLTable NameWidth=* SuppressDescription
    HeaderName /static/index-header.html
</Directory>

<LocationMatch "/logs/">
    RewriteEngine On
    RewriteRule ^/var/www/logs/(.*console\.html)$ /htmlify/$1 [QSA,L,PT]
    RewriteRule ^/var/www/logs/(.*\.txt\.gz)$ /htmlify/$1 [QSA,L,PT]
</LocationMatch>

# Correctly serve .gz files
RewriteCond   %{HTTP:Accept-Encoding} gzip
RewriteCond   %{LA-U:REQUEST_FILENAME}.gz -f
RewriteRule   ^(.+)$ $1.gz [L]
<FilesMatch ".*\.gz$">
    ForceType text/html
    AddDefaultCharset UTF-8
    AddEncoding x-gzip gz
</FilesMatch>


Alias "/logs-raw" "/var/www/logs"

<Directory "/usr/lib/python2.7/site-packages/os_loganalyze/">
    Require all granted
</Directory>
SetEnv OS_LOGANALYZE_ROOT_PATH /var/www/logs/
WSGIScriptAlias /htmlify /usr/lib/python2.7/site-packages/os_loganalyze/wsgi.py

- name: Ensure console.log does not exist.
  file:
    path: /tmp/console.log
    state: absent

- name: Start zuul_console daemon.
  zuul_console:
    path: /tmp/console.log
    port: 19885

- name: Create workspace directory.
  file:
    path: "{{ zuul_workspace_root }}"
    owner: zuul
    group: zuul
    state: directory

- name: Synchronize src repos to workspace directory.
  synchronize:
    dest: "{{ zuul_workspace_root }}"
    src: "{{ zuul.executor.src_root }}"
  no_log: true

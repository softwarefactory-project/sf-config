{
  "comments": [
    {
      "key": {
        "uuid": "f14ac5d7_f26c03ec",
        "filename": "ansible/roles/sf-base/tasks/install.yml",
        "patchSetId": 18
      },
      "lineNbr": 67,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-12-11T07:01:34Z",
      "side": 1,
      "message": "We should not update all on install, this should only be done if the openstack repo changed.\n\nMore over, we should also do those steps in the sf-upgrade module, so that we \u0027name\u003d* state\u003dlatest\u0027 only once.",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7dd6c591_73c7c5f7",
        "filename": "ansible/roles/sf-base/tasks/install.yml",
        "patchSetId": 18
      },
      "lineNbr": 67,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-12-11T09:54:26Z",
      "side": 1,
      "message": "Explication, in sf-upgrade, before doing state\u003dlatest, we need to also ensure that the correct rdo repository is installed to avoid updating the whole system twice. Then here, if there is a when: rdo_repo is changed, then we would not do that second system update.",
      "parentUuid": "f14ac5d7_f26c03ec",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc1b5d0a_74f39c5c",
        "filename": "ansible/roles/sf-base/tasks/install.yml",
        "patchSetId": 18
      },
      "lineNbr": 67,
      "author": {
        "id": 22
      },
      "writtenOn": "2018-12-11T14:51:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f14ac5d7_f26c03ec",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f9ba525_ba522efa",
        "filename": "ansible/roles/sf-base/tasks/install.yml",
        "patchSetId": 18
      },
      "lineNbr": 67,
      "author": {
        "id": 22
      },
      "writtenOn": "2018-12-11T14:51:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7dd6c591_73c7c5f7",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cc6e198b_b546e8f6",
        "filename": "ansible/roles/sf-base/tasks/install.yml",
        "patchSetId": 18
      },
      "lineNbr": 67,
      "author": {
        "id": 22
      },
      "writtenOn": "2018-12-11T21:47:25Z",
      "side": 1,
      "message": "it doesn\u0027t work for install server because rdo repo is installed by sfconfig, so when condition will be false for the first run",
      "parentUuid": "f14ac5d7_f26c03ec",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7630b903_b61d8dcf",
        "filename": "sfconfig/inventory.py",
        "patchSetId": 18
      },
      "lineNbr": 564,
      "author": {
        "id": 6
      },
      "writtenOn": "2018-12-07T09:11:28Z",
      "side": 1,
      "message": "On Centos \u0027install\u0027 works, so you mean on rhel there is the issue ? Then why don\u0027t we have the  issue for install_ansible ?",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "858ecc43_e67af346",
        "filename": "sfconfig/inventory.py",
        "patchSetId": 18
      },
      "lineNbr": 564,
      "author": {
        "id": 22
      },
      "writtenOn": "2018-12-07T13:36:23Z",
      "side": 1,
      "message": "It failed on rhel and centos, when doing yum install $url\n\n[root@centos-7 ~]# yum install -q https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm -y\nError: Nothing to do\n[root@centos-7 ~]# echo $?\n1\n[root@centos-7 ~]# yum localinstall -q https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm -y\n[root@centos-7 ~]# echo $?\n0\n\nFor ansible, we do yum install $package_name and it works as expected",
      "parentUuid": "7630b903_b61d8dcf",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab168645_76778783",
        "filename": "sfconfig/inventory.py",
        "patchSetId": 18
      },
      "lineNbr": 564,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-12-11T07:01:34Z",
      "side": 1,
      "message": "Why are we installing each time? Fabien, the ansible install is only done if ansible-playbook is not there.",
      "parentUuid": "858ecc43_e67af346",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "334159bb_d227b870",
        "filename": "sfconfig/inventory.py",
        "patchSetId": 18
      },
      "lineNbr": 564,
      "author": {
        "id": 6
      },
      "writtenOn": "2018-12-11T10:07:20Z",
      "side": 1,
      "message": "Ok better to do it only when not installed. But still don\u0027t see why \u0027localinstall\u0027 must be used here. Also it is deprecated.",
      "parentUuid": "ab168645_76778783",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dd691855_5d69b079",
        "filename": "sfconfig/inventory.py",
        "patchSetId": 18
      },
      "lineNbr": 564,
      "author": {
        "id": 22
      },
      "writtenOn": "2018-12-11T14:51:50Z",
      "side": 1,
      "message": "we need localinstall, because install fails if the rpm is already installed on the system, localinstall didn\u0027t have the same behavior than install when providing url instead package name",
      "parentUuid": "334159bb_d227b870",
      "revId": "91c7c1a2bec5008f4cbf3d4b1c58777a8af7317c",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    }
  ]
}
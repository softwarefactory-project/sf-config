{
  "comments": [
    {
      "key": {
        "uuid": "da37b569_c7ebb2af",
        "filename": "ansible/roles/sf-hound/defaults/main.yml",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-03-07T12:58:08Z",
      "side": 1,
      "message": "This can be done through sysconfig, e.g:\n\n    https://github.com/dmsimard/hound-localrepos/blob/master/files/hound.service#L9-L11\n    https://github.com/dmsimard/hound-localrepos/blob/master/tasks/hound.yml#L34\n    https://github.com/dmsimard/hound-localrepos/blob/master/templates/hound.config.j2",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 60
      },
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_87f5aa84",
        "filename": "ansible/roles/sf-hound/defaults/main.yml",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-03-07T13:03:36Z",
      "side": 1,
      "message": "Yes, but do we want that complexity now? :)",
      "parentUuid": "da37b569_c7ebb2af",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_07175aa4",
        "filename": "ansible/roles/sf-hound/defaults/main.yml",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-03-07T14:22:28Z",
      "side": 1,
      "message": "¯\\_(ツ)_/¯ it doesn\u0027t feel very complex, I can contribute it if you\u0027d like -- I think it\u0027s more important to support it *in the packaging* than in the role... i.e, we can just leave the defaults in the role/sf implementation but the packaging should support different config.",
      "parentUuid": "da37b569_87f5aa84",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_47032210",
        "filename": "ansible/roles/sf-hound/defaults/main.yml",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 6
      },
      "writtenOn": "2018-03-07T18:41:53Z",
      "side": 1,
      "message": "I agree it should be quite fast to add the sysconfig support in the package and setup the sysconfig file here.",
      "parentUuid": "da37b569_07175aa4",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_87ce0a59",
        "filename": "ansible/roles/sf-hound/tasks/setup.yml",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-03-07T12:58:08Z",
      "side": 1,
      "message": "NB /usr/local/bin is not in default PATH for default CentOS installations",
      "range": {
        "startLine": 5,
        "startChar": 10,
        "endLine": 5,
        "endChar": 24
      },
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_27f29e9b",
        "filename": "ansible/roles/sf-hound/tasks/setup.yml",
        "patchSetId": 2
      },
      "lineNbr": 5,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-03-07T13:03:36Z",
      "side": 1,
      "message": "yes, but that is only used by the update task so that\u0027s ok.",
      "parentUuid": "da37b569_87ce0a59",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_eafebb04",
        "filename": "ansible/roles/sf-hound/tasks/update.yml",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 6
      },
      "writtenOn": "2018-03-07T18:41:53Z",
      "side": 1,
      "message": "I\u0027m thinking we should run the hound-config-generator in a sf-config post-config action in case we update the generator script to have changes the hound config file applied when sf-config run w/o the need to have a change merged in the config repo. wdyt ?",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_e7035675",
        "filename": "ansible/roles/sf-hound/tasks/update.yml",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-03-07T12:58:08Z",
      "side": 1,
      "message": "Why /root/config ?",
      "range": {
        "startLine": 20,
        "startChar": 15,
        "endLine": 20,
        "endChar": 27
      },
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_47efa2b0",
        "filename": "ansible/roles/sf-hound/tasks/update.yml",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-03-07T13:03:36Z",
      "side": 1,
      "message": "That\u0027s the current config-update process: pull the config repo in /root/config, then check if there is something to do. It\u0027s quite ancient and the config repo sync could be kept somewhere else like /var/lib/sf/config",
      "parentUuid": "da37b569_e7035675",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_27205ef7",
        "filename": "ansible/roles/sf-hound/tasks/update.yml",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-03-07T14:22:28Z",
      "side": 1,
      "message": "Yeah I think that would make more sense than using /root/config (especially if we want to eventually switch to a \"sf\" user instead of running everything as root, for example)",
      "parentUuid": "da37b569_47efa2b0",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_aa08b329",
        "filename": "ansible/roles/sf-hound/tasks/update.yml",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 6
      },
      "writtenOn": "2018-03-07T18:41:53Z",
      "side": 1,
      "message": "Actuallly that\u0027s not needed as nothing in the script need to located in the config repo clone.",
      "range": {
        "startLine": 19,
        "startChar": 0,
        "endLine": 20,
        "endChar": 27
      },
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_c7b412d3",
        "filename": "ansible/roles/sf-hound/templates/hound-config-generator.py.j2",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-03-07T12:58:08Z",
      "side": 1,
      "message": "I\u0027ve always used \"/usr/bin/env\" but it looks like \"/bin/env\" is a thing too ¯\\_(ツ)_/¯",
      "range": {
        "startLine": 1,
        "startChar": 2,
        "endLine": 1,
        "endChar": 10
      },
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_e72a76e7",
        "filename": "ansible/roles/sf-hound/templates/hound-config-generator.py.j2",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-03-07T13:03:36Z",
      "side": 1,
      "message": "i\u0027m still used to /bin and /usr/bin being separated...",
      "parentUuid": "da37b569_c7b412d3",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_e7dcb61a",
        "filename": "ansible/roles/sf-hound/templates/hound-config-generator.py.j2",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-03-07T12:58:08Z",
      "side": 1,
      "message": "I\u0027ve done this slightly differently but it\u0027s mostly because in my use case I synchronize the repositories locally before adding them to the config: https://github.com/dmsimard/hound-localrepos/blob/master/files/localrepos.py",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 27,
        "endChar": 55
      },
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_0730ba55",
        "filename": "ansible/roles/sf-hound/templates/hound-config-generator.py.j2",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-03-07T13:03:36Z",
      "side": 1,
      "message": "Is there a reason we should do that?",
      "parentUuid": "da37b569_e7dcb61a",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_471d62bc",
        "filename": "ansible/roles/sf-hound/templates/hound-config-generator.py.j2",
        "patchSetId": 2
      },
      "lineNbr": 27,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-03-07T14:22:28Z",
      "side": 1,
      "message": "My \"localrepos\" implementation allows hound to index repositories from the local filesystem instead of remotely in order to prevent hound from constantly hammering GitHub.\n\nIt\u0027s not perfect and I\u0027m not saying we should do this here. I was mostly saying \"here\u0027s what I did in case it gives you any ideas\".",
      "parentUuid": "da37b569_0730ba55",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_c7165255",
        "filename": "ansible/roles/sf-hound/templates/hound-config-generator.py.j2",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 6
      },
      "writtenOn": "2018-03-07T18:02:39Z",
      "side": 1,
      "message": "If a branch can be specified in the conf then you can improve by using the default-branch info from the resource: https://softwarefactory-project.io/docs/managesf/resources.html#default-branch",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_0a043f13",
        "filename": "ansible/roles/sf-hound/templates/hound-config-generator.py.j2",
        "patchSetId": 2
      },
      "lineNbr": 33,
      "author": {
        "id": 6
      },
      "writtenOn": "2018-03-07T18:41:53Z",
      "side": 1,
      "message": "Tested a rpm-master on a repo and indexation was OK with this new code block.\n\n```\nfor repo, attr in data.get(\"resources\", {}).get(\"repos\", {}).items():\n    config[\"repos\"][repo] \u003d {\n        \"url\": \"https://sftests.com/r/%s.git\" % repo,\n        \"vcs-config\": {\n            \"ref\": attr.get(\u0027default-branch\u0027, \u0027master\u0027)\n        },\n        \"url-pattern\": {\n            \"base-url\": \"https://sftests.com/r/gitweb?p\u003d%s.git;a\u003dblob;f\u003d{path}{anchor}\" % repo,\n            \"anchor\": \"#l{line}\",\n        }\n    }\n```",
      "parentUuid": "da37b569_c7165255",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_07099a95",
        "filename": "refarch/allinone.yaml",
        "patchSetId": 2
      },
      "lineNbr": 39,
      "author": {
        "id": 277
      },
      "writtenOn": "2018-03-07T12:58:08Z",
      "side": 1,
      "message": "Another example reference architecture could split the git and hound services onto another node I guess ?",
      "range": {
        "startLine": 39,
        "startChar": 8,
        "endLine": 39,
        "endChar": 13
      },
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da37b569_a7346e4a",
        "filename": "refarch/allinone.yaml",
        "patchSetId": 2
      },
      "lineNbr": 39,
      "author": {
        "id": 7
      },
      "writtenOn": "2018-03-07T13:03:36Z",
      "side": 1,
      "message": "yes sure. Though we are still missing a real git server role, repos are only available through gerrit atm.",
      "parentUuid": "da37b569_07099a95",
      "revId": "9ef39494d59174ef04cd04cf8262c4ffb00ee3b7",
      "serverId": "6c1dc8ef-8b94-40e4-bd83-c2359d45ecc0",
      "unresolved": false
    }
  ]
}
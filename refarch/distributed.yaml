---
description: "A production ready architecture"
inventory:
  - name: managesf
    flavor: m1.large
    ip: 192.168.0.10
    roles:
      - install-server
      - mysql
      - zookeeper
      - gateway
      - cauth
      - managesf
      - etherpad
      - lodgeit
      - gitweb
      - gerrit
      - gerritbot
      - zuul-scheduler
      - zuul-executor
      - zuul-web
      - nodepool-launcher
      - murmur
      - mirror
      - kibana
      - repoxplorer
      - hydrant
      - firehose
      - grafana

  - name: elk
    ip: 192.168.0.11
    flavor: m1.medium
    roles:
      - elasticsearch
        # TODO: fix AnsibleUndefinedVariable: 'jobs_zmq_publishers' is undefined
     # - job-logs-gearman-client
     # - job-logs-gearman-worker
      - logstash
      - logserver
      - influxdb

  - name: nodepool-builder
    ip: 192.168.0.12
    flavor: m1.small
    roles:
      - nodepool-builder

  - name: zuul-merger
    ip: 192.168.0.14
    public_url: http://zuul-merger.fqdn
    flavor: m1.small
    roles:
      - zuul-merger

  - name: hypervisor-oci
    ip: 192.168.0.15
    max-servers: 10
    flavor: m1.small
    roles:
      - hypervisor-oci

---
# This file is managed by ansible, don't edit

# Call disable tasks with erase flag on
{% for host in inventory %}
- hosts: {{ host['hostname'] }}
  roles:
{% for role in host['rolesname'] %}
{% if role != 'sf-mysql' and role != 'sf-install-server' %}
    - name: "{{ role }}"
      action: disable
      erase: False
{% for key, value in host['params'].items() %}
      {{ key }}: {{ value }}
{% endfor %}
{% endif %}{% endfor %}

{% endfor %}

{% if 'influxdb' in roles %}
- hosts: all
  roles:
    - name: sf-telegraf
      action: disable
      erase: False
{% endif %}

# Disable mysql after services
- hosts: mysql
  roles:
    - name: sf-mysql
      action: disable
      erase: False

# Disable install-server after mysql
- hosts: install-server
  roles:
    - name: sf-install-server
      action: disable
      erase: False

# Disable base at last
- hosts: all
  roles:
    - name: sf-base
      action: disable
      erase: False
